$ ansible-playbook -i inventory mediawiki.yml

PLAY [lampservers] *********************************************************************************************************************************************************************************************************************************************************************************************************************************************************

TASK [Gathering Facts] *****************************************************************************************************************************************************************************************************************************************************************************************************************************************************
ok: [ec2-52-15-45-128.us-east-2.compute.amazonaws.com]

TASK [packages : Installing Packages for RHEL] *****************************************************************************************************************************************************************************************************************************************************************************************************************************
[DEPRECATION WARNING]: Invoking "dnf" only once while using a loop via squash_actions is deprecated. Instead of using a loop to supply multiple items and specifying `name: "{{ item }}"`, please use `name: ['httpd', 'php', 'php-mysqlnd', 'php-gd', 'php-xml', 'mariadb-server', 'mariadb', 'php-mbstring', 'php-json', 'python3-pip']` and remove the loop. This
feature will be removed in version 2.11. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
changed: [ec2-52-15-45-128.us-east-2.compute.amazonaws.com] => (item=[u'httpd', u'php', u'php-mysqlnd', u'php-gd', u'php-xml', u'mariadb-server', u'mariadb', u'php-mbstring', u'php-json', u'python3-pip'])

TASK [packages : create mysql db configuration file] ***********************************************************************************************************************************************************************************************************************************************************************************************************************
changed: [ec2-52-15-45-128.us-east-2.compute.amazonaws.com]

TASK [packages : start mariadb service] ************************************************************************************************************************************************************************************************************************************************************************************************************************************
changed: [ec2-52-15-45-128.us-east-2.compute.amazonaws.com]

TASK [packages : Make sure pymysql is present] *****************************************************************************************************************************************************************************************************************************************************************************************************************************
changed: [ec2-52-15-45-128.us-east-2.compute.amazonaws.com]

TASK [packages : Create DB] ************************************************************************************************************************************************************************************************************************************************************************************************************************************************
changed: [ec2-52-15-45-128.us-east-2.compute.amazonaws.com]

TASK [packages : Create DB User] *******************************************************************************************************************************************************************************************************************************************************************************************************************************************
[WARNING]: Module did not set no_log for update_password
changed: [ec2-52-15-45-128.us-east-2.compute.amazonaws.com]

TASK [packages : daemon reload] ********************************************************************************************************************************************************************************************************************************************************************************************************************************************
changed: [ec2-52-15-45-128.us-east-2.compute.amazonaws.com]

TASK [packages : restart the services after installation] ******************************************************************************************************************************************************************************************************************************************************************************************************************
changed: [ec2-52-15-45-128.us-east-2.compute.amazonaws.com] => (item=httpd)
changed: [ec2-52-15-45-128.us-east-2.compute.amazonaws.com] => (item=mariadb)

TASK [packages : enable the services] **************************************************************************************************************************************************************************************************************************************************************************************************************************************
changed: [ec2-52-15-45-128.us-east-2.compute.amazonaws.com] => (item=httpd)
changed: [ec2-52-15-45-128.us-east-2.compute.amazonaws.com] => (item=mariadb)

TASK [mediawiki : Change the working directory to non-privileged user] *****************************************************************************************************************************************************************************************************************************************************************************************************
changed: [ec2-52-15-45-128.us-east-2.compute.amazonaws.com]

TASK [mediawiki : Download MediaWiki tarball and key from sources] *********************************************************************************************************************************************************************************************************************************************************************************************************
changed: [ec2-52-15-45-128.us-east-2.compute.amazonaws.com] => (item={u'url': u'https://releases.wikimedia.org/mediawiki/1.34/mediawiki-1.34.2.tar.gz', u'dest': u'mediawiki-1.34.2.tar.gz'})
changed: [ec2-52-15-45-128.us-east-2.compute.amazonaws.com] => (item={u'url': u'https://releases.wikimedia.org/mediawiki/1.34/mediawiki-1.34.2.tar.gz.sig', u'dest': u'mediawiki-1.34.2.tar.gz.sig'})

TASK [mediawiki : verify gpg key of the tarball] ***************************************************************************************************************************************************************************************************************************************************************************************************************************
fatal: [ec2-52-15-45-128.us-east-2.compute.amazonaws.com]: FAILED! => {"changed": true, "cmd": "gpg --verify \"mediawiki-1.34.2.tar.gz.sig\" \"mediawiki-1.34.2.tar.gz\"", "delta": "0:00:00.295774", "end": "2020-09-02 18:03:10.476180", "msg": "non-zero return code", "rc": 2, "start": "2020-09-02 18:03:10.180406", "stderr": "gpg: directory '/root/.gnupg' created\ngpg: keybox '/root/.gnupg/pubring.kbx' created\ngpg: Signature made Wed 24 Jun 2020 04:28:30 PM UTC\ngpg:                using DSA key 1D98867E82982C8FE0ABC25F9B69B3109D3BB7B0\ngpg: Can't check signature: No public key", "stderr_lines": ["gpg: directory '/root/.gnupg' created", "gpg: keybox '/root/.gnupg/pubring.kbx' created", "gpg: Signature made Wed 24 Jun 2020 04:28:30 PM UTC", "gpg:                using DSA key 1D98867E82982C8FE0ABC25F9B69B3109D3BB7B0", "gpg: Can't check signature: No public key"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [mediawiki : Extract the tarball] *************************************************************************************************************************************************************************************************************************************************************************************************************************************
changed: [ec2-52-15-45-128.us-east-2.compute.amazonaws.com]

TASK [mediawiki : Add symlink for easy upgrades] ***************************************************************************************************************************************************************************************************************************************************************************************************************************
changed: [ec2-52-15-45-128.us-east-2.compute.amazonaws.com]

TASK [config : Change Document root directory and Index in httpd.conf] *****************************************************************************************************************************************************************************************************************************************************************************************************
changed: [ec2-52-15-45-128.us-east-2.compute.amazonaws.com] => (item={u'regexp': u'^DocumentRoot "/var/www"', u'line': u'DocumentRoot "/var/www/mediawiki"'})
changed: [ec2-52-15-45-128.us-east-2.compute.amazonaws.com] => (item={u'regexp': u'^<Directory "/var/www">', u'line': u'<Directory "/var/www/mediawiki">'})
changed: [ec2-52-15-45-128.us-east-2.compute.amazonaws.com] => (item={u'regexp': u'^DirectoryIndex', u'line': u'DirectoryIndex index.html index.html.var index.php'})

TASK [config : install firewalld if not present] ***************************************************************************************************************************************************************************************************************************************************************************************************************************
changed: [ec2-52-15-45-128.us-east-2.compute.amazonaws.com]

TASK [config : Firewall Configuration] *************************************************************************************************************************************************************************************************************************************************************************************************************************************
changed: [ec2-52-15-45-128.us-east-2.compute.amazonaws.com] => (item=http)
changed: [ec2-52-15-45-128.us-east-2.compute.amazonaws.com] => (item=https)

TASK [config : SELinux Configuration] **************************************************************************************************************************************************************************************************************************************************************************************************************************************
changed: [ec2-52-15-45-128.us-east-2.compute.amazonaws.com]

TASK [config : Set Context] ************************************************************************************************************************************************************************************************************************************************************************************************************************************************
changed: [ec2-52-15-45-128.us-east-2.compute.amazonaws.com] => (item=mediawiki-1.34.2)
changed: [ec2-52-15-45-128.us-east-2.compute.amazonaws.com] => (item=mediawiki)

TASK [config : Change owner to apache:apache user] *************************************************************************************************************************************************************************************************************************************************************************************************************************
changed: [ec2-52-15-45-128.us-east-2.compute.amazonaws.com] => (item=/var/www/mediawiki)
changed: [ec2-52-15-45-128.us-east-2.compute.amazonaws.com] => (item=/var/www/mediawiki-1.34.2)

PLAY RECAP *****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************
ec2-52-15-45-128.us-east-2.compute.amazonaws.com : ok=20    changed=19    unreachable=0    failed=0    skipped=0    rescued=0    ignored=1
